<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane prefHeight="877.0" prefWidth="1048.0"
            xmlns="http://javafx.com/javafx/8"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="co.edu.uniquindio.poo.amazen.ViewController.CatalogoViewController">

    <!-- ENCABEZADO -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="10" BorderPane.alignment="CENTER">
            <padding>
                <Insets bottom="12" left="12" right="12" top="12"/>
            </padding>
            <children>
                <Button fx:id="botonVolver" text="← Volver" onAction="#onVolver"
                        style="-fx-background-color: #8888ff; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8;" />
                <Label style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"
                       text="Catálogo de Productos"/>
            </children>
        </HBox>
    </top>

    <!-- CONTENIDO CENTRAL -->
    <center>
        <VBox alignment="TOP_CENTER" spacing="12">
            <padding>
                <Insets bottom="12" left="12" right="12" top="12"/>
            </padding>
            <children>

                <!-- BUSCAR PRODUCTO -->
                <TitledPane expanded="true" prefWidth="820" text="Buscar producto">
                    <content>
                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <padding>
                                <Insets bottom="8" left="8" right="8" top="8"/>
                            </padding>
                            <children>
                                <Label text="Buscar por ID o nombre:"/>
                                <TextField fx:id="txtBuscar" prefWidth="260" promptText="Ej: P001 o Televisor"/>
                                <Button fx:id="btnBuscar" onAction="#buscarProducto"
                                        style="-fx-background-color: #2980b9; -fx-text-fill: white;"
                                        text="Buscar"/>
                                <Button fx:id="btnMostrarTodos" onAction="#mostrarTodos"
                                        style="-fx-background-color: #7f8c8d; -fx-text-fill: white;"
                                        text="Mostrar todos"/>
                            </children>
                        </HBox>
                    </content>
                </TitledPane>

                <!-- TABLA DE PRODUCTOS -->
                <TableView fx:id="tablaProductos" prefHeight="330" prefWidth="820">
                    <columns>
                        <TableColumn fx:id="colId" prefWidth="120" text="ID"/>
                        <TableColumn fx:id="colNombre" prefWidth="320" text="Nombre"/>
                        <TableColumn fx:id="colPrecio" prefWidth="160" text="Precio"/>
                        <TableColumn fx:id="colDisponible" prefWidth="120" text="Disponible"/>
                    </columns>
                </TableView>

                <!-- FILA DE ACCIONES -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <children>
                        <Label text="Cantidad:"/>
                        <TextField fx:id="txtCantidad" prefWidth="70" promptText="1"/>
                        <Button fx:id="btnAgregarCarrito" onAction="#agregarAlCarrito"
                                style="-fx-background-color: #00cc66; -fx-text-fill: white;"
                                text="Agregar al Carrito"/>

                        <Region HBox.hgrow="ALWAYS"/>

                        <Button fx:id="btnClonar" onAction="#clonarProducto"
                                style="-fx-background-color: #f39c12; -fx-text-fill: white;"
                                text="Clonar Producto Seleccionado"/>
                    </children>
                </HBox>

                <!-- DIRECCIÓN / MAPA -->
                <TitledPane expanded="true" prefWidth="820" text="Dirección de envío">
                    <content>
                        <VBox spacing="10">
                            <padding>
                                <Insets bottom="10" left="10" right="10" top="10"/>
                            </padding>
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <children>
                                        <Label text="Dirección:"/>
                                        <TextField fx:id="txtDireccion" prefWidth="400" promptText="Escriba su dirección"/>
                                        <Button fx:id="btnSeleccionarMapa" onAction="#onSeleccionarMapa"
                                                style="-fx-background-color: #3498db; -fx-text-fill: white;" text="Seleccionar en Mapa"/>
                                        <Button fx:id="btnConfirmarDireccion" onAction="#onConfirmarDireccion"
                                                style="-fx-background-color: #2ecc71; -fx-text-fill: white;" text="Confirmar Dirección"/>
                                    </children>
                                </HBox>
                            </children>
                        </VBox>
                    </content>
                </TitledPane>

                <!-- AGREGAR / EDITAR PRODUCTO (SOLO ADMIN) -->
                <TitledPane fx:id="panelAgregarProducto" expanded="true" prefWidth="820" text="Agregar / Editar producto">
                    <content>
                        <VBox spacing="10">
                            <padding>
                                <Insets bottom="10" left="10" right="10" top="10"/>
                            </padding>
                            <children>

                                <GridPane hgap="10" vgap="10">
                                    <columnConstraints>
                                        <ColumnConstraints halignment="RIGHT" minWidth="120"/>
                                        <ColumnConstraints hgrow="ALWAYS"/>
                                    </columnConstraints>
                                    <children>
                                        <Label text="ID:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <TextField fx:id="txtId" promptText="Ingrese ID" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Nombre:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextField fx:id="txtNombre" promptText="Ingrese nombre" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Precio:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <TextField fx:id="txtPrecio" promptText="Ingrese precio" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                                        <Label text="Disponible:" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                        <CheckBox fx:id="chkDisponible" text="Sí" GridPane.columnIndex="1" GridPane.rowIndex="3"/>
                                    </children>
                                </GridPane>

                                <HBox alignment="CENTER_RIGHT" spacing="10">
                                    <children>
                                        <Button fx:id="btnAgregar" onAction="#agregarProducto"
                                                style="-fx-background-color: #27ae60; -fx-text-fill: white;" text="Guardar Producto"/>
                                        <Button fx:id="btnLimpiar" onAction="#limpiarCampos"
                                                style="-fx-background-color: #95a5a6; -fx-text-fill: white;" text="Limpiar Campos"/>
                                    </children>
                                </HBox>

                            </children>
                        </VBox>
                    </content>
                </TitledPane>

            </children>
        </VBox>
    </center>

</BorderPane>
