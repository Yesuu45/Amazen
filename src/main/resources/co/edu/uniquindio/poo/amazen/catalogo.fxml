<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane prefHeight="877.0" prefWidth="1048.0"
            xmlns="http://javafx.com/javafx/8"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="co.edu.uniquindio.poo.amazen.ViewController.CatalogoViewController">

    <!-- ENCABEZADO -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="10" BorderPane.alignment="CENTER">
            <padding>
                <Insets bottom="12" left="12" right="12" top="12"/>
            </padding>
            <children>
                <Button fx:id="botonVolver" text="← Volver" onAction="#onVolver"
                        style="-fx-background-color: #8888ff; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8;" />
                <Label style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"
                       text="Catálogo de Productos"/>
            </children>
        </HBox>
    </top>

    <!-- CONTENIDO CENTRAL -->
    <center>
        <VBox alignment="TOP_CENTER" spacing="12">
            <padding>
                <Insets bottom="12" left="12" right="12" top="12"/>
            </padding>
            <children>

                <!-- BUSCAR PRODUCTO -->
                <TitledPane expanded="true" prefWidth="820" text="Buscar producto">
                    <content>
                        <HBox alignment="CENTER_LEFT" spacing="8">
                            <padding>
                                <Insets bottom="8" left="8" right="8" top="8"/>
                            </padding>
                            <children>
                                <Label text="Buscar por ID o nombre:"/>
                                <TextField fx:id="txtBuscar" prefWidth="260" promptText="Ej: P001 o Televisor"/>
                                <Button fx:id="btnBuscar" onAction="#buscarProducto"
                                        style="-fx-background-color: #2980b9; -fx-text-fill: white;"
                                        text="Buscar"/>
                                <Button fx:id="btnMostrarTodos" onAction="#mostrarTodos"
                                        style="-fx-background-color: #7f8c8d; -fx-text-fill: white;"
                                        text="Mostrar todos"/>
                            </children>
                        </HBox>
                    </content>
                </TitledPane>

                <!-- TABLA DE PRODUCTOS -->
                <TableView fx:id="tablaProductos" prefHeight="330" prefWidth="820">
                    <columns>
                        <TableColumn fx:id="colId"         prefWidth="100" text="ID"/>
                        <TableColumn fx:id="colNombre"     prefWidth="220" text="Nombre"/>
                        <TableColumn fx:id="colPrecio"     prefWidth="90"  text="Precio"/>
                        <TableColumn fx:id="colDisponible" prefWidth="90"  text="Disponible"/>
                        <TableColumn fx:id="colPeso"       prefWidth="110" text="Peso (kg)"/>
                        <TableColumn fx:id="colVolumen"    prefWidth="130" text="Volumen (cm³)"/>
                    </columns>
                </TableView>

                <!-- FILA DE ACCIONES (CANTIDAD / CARRITO / COTIZAR) -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <children>
                        <Label text="Cantidad:"/>
                        <TextField fx:id="txtCantidad" prefWidth="70" promptText="1"/>

                        <Button fx:id="btnAgregarCarrito" onAction="#agregarAlCarrito"
                                style="-fx-background-color: #00cc66; -fx-text-fill: white;"
                                text="Agregar al Carrito"/>

                        <Region HBox.hgrow="ALWAYS"/>

                        <Button fx:id="btnClonar" onAction="#clonarProducto"
                                style="-fx-background-color: #f39c12; -fx-text-fill: white;"
                                text="Clonar Producto Seleccionado"/>
                    </children>
                </HBox>

                <!-- DIRECCIÓN / MAPA -->
                <TitledPane expanded="true" prefWidth="820" text="Dirección de envío">
                    <content>
                        <VBox spacing="10">
                            <padding>
                                <Insets bottom="10" left="10" right="10" top="10"/>
                            </padding>
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <children>
                                        <Label text="Dirección:"/>
                                        <TextField fx:id="txtDireccion" prefWidth="400" promptText="Escriba su dirección"/>
                                        <Button fx:id="btnSeleccionarMapa" onAction="#onSeleccionarMapa"
                                                style="-fx-background-color: #3498db; -fx-text-fill: white;" text="Seleccionar en Mapa"/>
                                        <Button fx:id="btnConfirmarDireccion" onAction="#onConfirmarDireccion"
                                                style="-fx-background-color: #2ecc71; -fx-text-fill: white;" text="Confirmar Dirección"/>
                                    </children>
                                </HBox>
                            </children>
                        </VBox>
                    </content>
                </TitledPane>

                <!-- AGREGAR / EDITAR PRODUCTO (SOLO ADMIN) -->
                <TitledPane fx:id="panelAgregarProducto" expanded="false" prefWidth="820" text="Agregar / Editar producto">
                    <content>
                        <VBox spacing="10">
                            <padding>
                                <Insets bottom="10" left="10" right="10" top="10"/>
                            </padding>
                            <children>

                                <GridPane hgap="10" vgap="10">
                                    <columnConstraints>
                                        <ColumnConstraints halignment="RIGHT" minWidth="120"/>
                                        <ColumnConstraints hgrow="ALWAYS"/>
                                    </columnConstraints>
                                    <children>
                                        <Label text="ID:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <TextField fx:id="txtId" promptText="Ingrese ID" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Nombre:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextField fx:id="txtNombre" promptText="Ingrese nombre" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Precio:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <TextField fx:id="txtPrecio" promptText="Ingrese precio" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                                        <Label text="Peso (kg):" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                        <TextField fx:id="txtPeso" promptText="Ej: 1.5" GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                                        <Label text="Volumen (cm³):" GridPane.columnIndex="0" GridPane.rowIndex="4"/>
                                        <TextField fx:id="txtVolumen" promptText="Ej: 1200" GridPane.columnIndex="1" GridPane.rowIndex="4"/>

                                        <Label text="Disponible:" GridPane.columnIndex="0" GridPane.rowIndex="5"/>
                                        <CheckBox fx:id="chkDisponible" text="Sí" GridPane.columnIndex="1" GridPane.rowIndex="5"/>
                                    </children>
                                </GridPane>

                                <HBox alignment="CENTER_RIGHT" spacing="10">
                                    <children>
                                        <Button fx:id="btnAgregar" onAction="#agregarProducto"
                                                style="-fx-background-color: #27ae60; -fx-text-fill: white;" text="Guardar Producto"/>
                                        <Button fx:id="btnLimpiar" onAction="#limpiarCampos"
                                                style="-fx-background-color: #95a5a6; -fx-text-fill: white;" text="Limpiar Campos"/>
                                    </children>
                                </HBox>

                            </children>
                        </VBox>
                    </content>
                </TitledPane>

                <!-- RF-003: COTIZAR ENVÍO DEL PRODUCTO SELECCIONADO -->
                <TitledPane expanded="false" prefWidth="820" text="Cotizar envío del producto seleccionado">
                    <content>
                        <VBox spacing="8">
                            <padding>
                                <Insets top="8" right="8" bottom="8" left="8"/>
                            </padding>
                            <children>
                                <GridPane hgap="10" vgap="8">
                                    <columnConstraints>
                                        <ColumnConstraints minWidth="120" halignment="RIGHT"/>
                                        <ColumnConstraints hgrow="ALWAYS"/>
                                    </columnConstraints>
                                    <children>
                                        <Label text="Origen:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <TextField fx:id="txtOrigenEnvio" promptText="Ciudad origen"
                                                   GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Dirección / Destino:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextField fx:id="txtDestinoEnvio" promptText="Ciudad o dirección destino"
                                                   GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Prioridad:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <ComboBox fx:id="cmbPrioridadEnvio"
                                                  GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                                    </children>
                                </GridPane>

                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <children>
                                        <Button fx:id="btnCotizarEnvio" text="Cotizar Envío"
                                                onAction="#cotizarEnvioSeleccion"
                                                style="-fx-background-color: #3498db; -fx-text-fill: white;"/>
                                        <Label fx:id="lblResumenEnvio" text="Tarifa estimada: —"/>
                                    </children>
                                </HBox>
                            </children>
                        </VBox>
                    </content>
                </TitledPane>

                <!-- RF-003: COTIZAR ENVÍO DE PAQUETE LIBRE -->
                <TitledPane expanded="false" prefWidth="820" text="Cotizar envío de paquete (peso / volumen libre)">
                    <content>
                        <VBox spacing="8">
                            <padding>
                                <Insets top="8" right="8" bottom="8" left="8"/>
                            </padding>
                            <children>
                                <GridPane hgap="10" vgap="8">
                                    <columnConstraints>
                                        <ColumnConstraints minWidth="120" halignment="RIGHT"/>
                                        <ColumnConstraints hgrow="ALWAYS"/>
                                    </columnConstraints>
                                    <children>
                                        <Label text="Origen:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <TextField fx:id="txtOrigenPaquete" promptText="Ciudad origen"
                                                   GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                                        <Label text="Destino:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <TextField fx:id="txtDestinoPaquete" promptText="Ciudad / dirección destino"
                                                   GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                                        <Label text="Peso (kg):" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                                        <TextField fx:id="txtPesoPaquete" promptText="Ej: 2.3"
                                                   GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                                        <Label text="Volumen (cm³):" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                                        <TextField fx:id="txtVolumenPaquete" promptText="Ej: 3500"
                                                   GridPane.columnIndex="1" GridPane.rowIndex="3"/>

                                        <Label text="Prioridad:" GridPane.columnIndex="0" GridPane.rowIndex="4"/>
                                        <ComboBox fx:id="cmbPrioridadPaquete"
                                                  GridPane.columnIndex="1" GridPane.rowIndex="4"/>
                                    </children>
                                </GridPane>

                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <children>
                                        <Button text="Cotizar Paquete Libre"
                                                onAction="#onCotizarPaqueteLibre"
                                                style="-fx-background-color: #8e44ad; -fx-text-fill: white;"/>
                                        <Button text="Agregar Paquete al Carrito"
                                                onAction="#onAgregarPaqueteAlCarrito"
                                                style="-fx-background-color: #16a085; -fx-text-fill: white;"/>
                                        <Label fx:id="lblResumenPaquete" text="Tarifa estimada: —"/>
                                    </children>
                                </HBox>
                            </children>
                        </VBox>
                    </content>
                </TitledPane>

            </children>
        </VBox>
    </center>

</BorderPane>
